name: Backend deploy
on:
  push:
    branches:
      - "master"
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Install SSH Key
        uses: shimataro/ssh-key-action@v2
        with:
          key: ${{ secrets.SSH_KEY }}
      - name: Adding Known Hosts
        run: ssh-keyscan -H ${{ secrets.SSH_HOST }} >> ~/.ssh/known_hosts
      - name: Deploy with rsync
        run: rsync -avz ./dist/ ${{ secrets.SSH_USERNAME }}@${{ secrets.SSH_HOST }}:/home/zellwk/zellwk.com/dist/
#    steps:#
#      - name: Deploy NodeJS app
#        uses: appleboy/ssh-action@v0.1.2
#        with:
#          host: ${{secrets.SSH_HOST}} # IP address of the server you wish to ssh into
#          key: ${{secrets.SSH_KEY}} # Private or public key of the server
#          username: ${{ secrets.SSH_USERNAME }} # User of the server you want to ssh int
#
#          script: |
#            mkdir test
#            cd test
#            git clone git@github.com:/roma-bashtevych/digitalocean-with-github-actions.git
#            echo 'Deployment successful to digital ocean'
